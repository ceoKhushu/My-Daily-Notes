<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Soul Talk - Social Media Platform - By Khushwant Yadav(Founder)</title>
  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-Q8NMYLG793"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}  
    gtag('js', new Date());
    gtag('config', 'G-Q8NMYLG793');
  </script>

  <style>
    /* Global Styles */
    body { margin: 0; font-family: 'Segoe UI', sans-serif; background: #f4f4f4; color: #333; }
    .dark-mode { background: #333; color: #fff; }
    .dark-mode header { background: #6a1b9a; }

    header { background: #4a148c; color: #fff; text-align: center; padding: 1rem; }
    nav { display: flex; justify-content: center; background: #eee; padding: 0.5rem; position: relative; }
    nav button { background: #6a1b9a; color: #fff; border: none; margin: 0 0.5rem; padding: 0.5rem 1rem; border-radius: 5px; cursor: pointer; }
    nav button:hover { background: #4a148c; }
    .message-btn { position: absolute; right: 1rem; top: 0.5rem; background: transparent; color: #6a1b9a; font-size: 1.5rem; }

    /* Registration */
    .registration { text-align: center; margin: 2rem; }
    .registration input { display: block; width: 80%; margin: 0.5rem auto; padding: 0.7rem; border-radius: 5px; border: 1px solid #ccc; }
    .registration button { padding: 0.7rem 1.5rem; background: #4a148c; color: #fff; border: none; border-radius: 5px; cursor: pointer; }

    /* Search */
    #searchSection { text-align: center; margin: 1rem; }
    #searchInput { padding: 0.7rem; width: 60%; border-radius: 5px; border: 1px solid #ccc; }
    #searchResults div { background: #fff; margin: 0.5rem auto; padding: 0.5rem; width: 60%; border-radius: 5px; }

    /* Profile & Post */
    .profile-section { display: flex; justify-content: space-between; margin: 1rem; }
    .profile { text-align: center; }
    #profile-pic { width: 100px; height: 100px; border-radius: 50%; object-fit: cover; }
    .create-post { flex: 1; margin-left: 1rem; }
    textarea { width: 100%; padding: 0.5rem; border-radius: 5px; border: 1px solid #ccc; }
    .create-post input { margin: 0.5rem 0; }
    .create-post button { padding: 0.5rem 1rem; background: #6a1b9a; color: #fff; border: none; border-radius: 5px; cursor: pointer; }

    /* Feed */
    .feed { max-width: 600px; margin: 1rem auto; }
    .post { background: #fff; padding: 1rem; margin-bottom: 1rem; border-radius: 10px; }
    .post img { max-width: 100%; border-radius: 10px; margin-top: 0.5rem; }
    .post-footer { display: flex; justify-content: space-between; margin-top: 0.5rem; }
    .post-footer button { background: #eee; border: none; padding: 0.5rem; border-radius: 5px; cursor: pointer; }

    /* Chat */
    #chatSection { display: none; position: fixed; top: 3.5rem; right: 1rem; width: 300px; height: 400px; background: #fff; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.3); overflow: hidden; }
    .chat-header { background: #4a148c; color: #fff; padding: 0.5rem; text-align: center; }
    .friend-list, .chat-window { height: calc(50% - 1rem); overflow-y: auto; padding: 0.5rem; }
    .friend-list ul { list-style: none; padding: 0; }
    .friend-list li { padding: 0.5rem; border-bottom: 1px solid #ccc; cursor: pointer; }
    .friend-list li:hover { background: #f0f0f0; }
    .chat-window { border-top: 1px solid #ccc; }
    .chat-window h4 { margin-top: 0; }
    #chatMessages { height: 200px; overflow-y: auto; border: 1px solid #ccc; padding: 0.5rem; margin-bottom: 0.5rem; }
    #chatInput { width: calc(100% - 4rem); padding: 0.4rem; }
    .chat-window button { padding: 0.4rem; margin-left: 0.5rem; }

    /* Help */
    .help { text-align: center; margin: 1rem; }
  </style>
</head>
<body>
  <header class="header">
    <h1>Soul Talk</h1>
  </header>

  <section id="registrationSection" class="registration">
    <h2>Register</h2>
    <input type="text" id="username" placeholder="Username">
    <input type="password" id="password" placeholder="Password">
    <button onclick="registerUser()">Register</button>
  </section>

  <section id="searchSection">
    <input type="text" id="searchInput" placeholder="Search users...">
    <button onclick="searchUsers()">Search</button>
    <div id="searchResults"></div>
  </section>

  <nav id="nav">
    <button onclick="showExplore()">Explore</button>
    <button onclick="showSearch()">Search</button>
    <button onclick="showSettings()">Settings</button>
    <button onclick="logout()">Logout</button>
    <button class="message-btn" onclick="toggleChat()">✉️</button>
  </nav>

  <main id="mainFeedSection">
    <section class="profile-section">
      <div class="profile">
        <img id="profile-pic" src="default-profile.jpg" alt="Profile Pic">
        <h2 id="usernameDisplay"></h2>
        <p id="bioDisplay"></p>
        <button onclick="editProfile()">Edit Profile</button>
      </div>
      <div class="create-post">
        <textarea id="post-caption" placeholder="What's on your mind?"></textarea>
        <input type="file" id="post-image">
        <button onclick="createPost()">Post</button>
      </div>
    </section>
    <section class="feed" id="feed"></section>
  </main>

  <div id="chatSection">
    <div class="chat-header"><h3>Messages</h3></div>
    <div class="friend-list">
      <h4>Friends</h4>
      <ul id="friendList"></ul>
    </div>
    <div class="chat-window">
      <h4 id="chatWith">Select a friend</h4>
      <div id="chatMessages"></div>
      <input type="text" id="chatInput" placeholder="Type a message...">
      <button onclick="sendMessage()">Send</button>
      <button onclick="clearChat()">Delete Chat</button>
    </div>
  </div>

  <footer class="help">
    <p>Need help? <a href="mailto:ceokhushu@gmail.com">ceokhushu@gmail.com</a></p>
  </footer>

  <script>
    let currentUser = null;
    let registeredUsers = [];
    let chats = {};
    let currentChatFriend = null;

    // Registration and Login
    function registerUser() {
      const user = document.getElementById('username').value.trim();
      const pass = document.getElementById('password').value;
      if (!user || !pass) return alert('Enter username and password');
      if (registeredUsers.includes(user)) return alert('Username taken');
      registeredUsers.push(user);
      chats[user] = {};
      currentUser = user;
      document.getElementById('usernameDisplay').textContent = user;
      document.getElementById('bioDisplay').textContent = 'This is your bio';
      document.getElementById('registrationSection').style.display = 'none';
      document.getElementById('nav').style.display = 'flex';
      document.getElementById('mainFeedSection').style.display = 'block';
      populateFriends();
    }

    // Populate friend list
    function populateFriends() {
      const list = document.getElementById('friendList'); list.innerHTML = '';
      registeredUsers.forEach(u => {
        if (u !== currentUser) {
          const li = document.createElement('li'); li.textContent = u;
          li.onclick = () => openChat(u);
          list.appendChild(li);
        }
      });
    }

    // Toggle chat panel
    function toggleChat() {
      const sec = document.getElementById('chatSection');
      sec.style.display = sec.style.display === 'block' ? 'none' : 'block';
    }

    // Open chat with friend
    function openChat(friend) {
      currentChatFriend = friend;
      document.getElementById('chatWith').textContent = 'Chat with ' + friend;
      const msgs = chats[currentUser][friend] || [];
      const container = document.getElementById('chatMessages'); container.innerHTML = '';
      msgs.forEach(m => {
        const p = document.createElement('p'); p.textContent = m; container.appendChild(p);
      });
    }

    // Send message
    function sendMessage() {
      const input = document.getElementById('chatInput'); const msg = input.value.trim();
      if (!msg || !currentChatFriend) return;
      chats[currentUser][currentChatFriend] = chats[currentUser][currentChatFriend] || [];
      chats[currentUser][currentChatFriend].push(msg);
      openChat(currentChatFriend);
      input.value = '';
    }

    // Clear chat history
    function clearChat() {
      if (!currentChatFriend) return;
      chats[currentUser][currentChatFriend] = [];
      openChat(currentChatFriend);
    }

    // Search users
    function searchUsers() {
      const q = document.getElementById('searchInput').value.toLowerCase();
      const res = document.getElementById('searchResults'); res.innerHTML = '';
      registeredUsers.filter(u => u.toLowerCase().includes(q)).forEach(u => {
        const d = document.createElement('div'); d.textContent = u; res.appendChild(d);
      });
    }

    // Explore, Settings, Logout (simplified)
    function showExplore(){ alert('Explore coming soon'); }
    function showSettings(){
      const dark = confirm('Switch to Dark Mode?');
      document.body.classList.toggle('dark-mode', dark);
    }
    function logout(){ location.reload(); }

    // Create post (existing code)
    function createPost() { /* ... */ }
  </script>
</body>
</html>
